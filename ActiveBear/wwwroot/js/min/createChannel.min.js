"use strict"; var ChannelCreated = "ChannelCreated", connection = (new signalR.HubConnectionBuilder).withUrl("/chatHub").build(), titleInput = document.getElementById("channel_name_submit"), keyInput = document.getElementById("channel_key_submit"), createButton = document.getElementById("channel_create_button"); function CreateChannel() { var n = titleInput.value, e = sha256(keyInput.value), t = ChatHub.GenerateChannelCreationPacket(n, e); connection.invoke("CreateChannel", t).catch(function (n) { return console.error(n.toString()) }) } keyInput.addEventListener("keydown", function (n) { "Enter" === n.key && CreateChannel() }), createButton.addEventListener("mousedown", function (n) { CreateChannel() }), connection.on(ChannelCreated, function (n) { if (null === n || "" === n); else { var e = "/ChannelAuth/AuthUserToChannel/" + n; window.location.replace(e) } }), connection.start().then(function () { }).catch(function (n) { return console.error(n.toString()) });